{% extends "auth_base.html" %}

{% block title %}Register - EvenZa{% endblock %}

{% block content %}
<div class="auth-card">
    <div class="auth-header">
        <i class="fas fa-graduation-cap"></i>
        <h2>Welcome to EvenZa</h2>
        <p>Create your account to get started</p>
    </div>
    
    <form method="POST" action="{{ url_for('register') }}" class="auth-form">
        <div class="form-group">
            <label for="username" class="form-label">Username</label>
            <div class="input-group">
                <span class="input-icon">
                    <i class="fas fa-user"></i>
                </span>
                <input type="text" 
                       class="form-control" 
                       id="username" 
                       name="username" 
                       placeholder="Choose your username" 
                       required
                       minlength="3"
                       maxlength="20">
            </div>
            <small class="form-text">Must be 3-20 characters long</small>
        </div>
        
        <div class="form-group">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
                <span class="input-icon">
                    <i class="fas fa-lock"></i>
                </span>
                <input type="password" 
                       class="form-control" 
                       id="password" 
                       name="password" 
                       placeholder="Create a strong password" 
                       required
                       minlength="6">
                <button type="button" class="password-toggle" onclick="togglePassword('password')">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
            <small class="form-text">At least 6 characters required</small>
        </div>
        
        <div class="form-group">
            <label for="confirm_password" class="form-label">Confirm Password</label>
            <div class="input-group">
                <span class="input-icon">
                    <i class="fas fa-lock"></i>
                </span>
                <input type="password" 
                       class="form-control" 
                       id="confirm_password" 
                       name="confirm_password" 
                       placeholder="Confirm your password" 
                       required>
                <button type="button" class="password-toggle" onclick="togglePassword('confirm_password')">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
        </div>
        
        <div class="form-check mb-4">
            <input type="checkbox" class="form-check-input" id="terms" required>
            <label class="form-check-label" for="terms">
                I agree to the <a href="#" class="text-primary">Terms of Service</a>
            </label>
        </div>
        
        <button type="submit" class="btn-primary">
            <i class="fas fa-user-plus"></i>
            Create Account
        </button>
    </form>
    
    <div class="auth-footer">
        <p class="text-muted mb-0">
            Already have an account? 
            <a href="{{ url_for('login') }}">Sign in here</a>
        </p>
    </div>
</div>

<style>
.form-text {
    font-size: 0.875rem;
    color: #86868b;
    margin-top: 0.25rem;
}

.password-toggle {
    position: absolute;
    right: 1rem;
    background: none;
    border: none;
    color: #86868b;
    cursor: pointer;
    font-size: 1rem;
    transition: color 0.3s ease;
}

.password-toggle:hover {
    color: #667eea;
}

.form-check {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.form-check-input {
    width: 1.125rem;
    height: 1.125rem;
    accent-color: #667eea;
}

.form-check-label {
    font-size: 0.875rem;
    color: #1d1d1f;
}

.form-check-label a {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;
}

.form-check-label a:hover {
    text-decoration: underline;
}
</style>

<script>
function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const icon = input.nextElementSibling.querySelector('i');
    
    if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
}

// Password confirmation validation
const password = document.getElementById('password');
const confirmPassword = document.getElementById('confirm_password');

function validatePassword() {
    if (password.value !== confirmPassword.value) {
        confirmPassword.setCustomValidity('Passwords do not match');
    } else {
        confirmPassword.setCustomValidity('');
    }
}

password.addEventListener('change', validatePassword);
confirmPassword.addEventListener('keyup', validatePassword);
</script>
{% endblock %}